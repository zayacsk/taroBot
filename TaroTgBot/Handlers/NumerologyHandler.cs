using TaroTgBot.Services;

namespace TaroTgBot.Handlers
{
    public class NumerologyHandler
    {
        private readonly RequestGpt _requestGpt;

        public NumerologyHandler()
        {
            _requestGpt = new RequestGpt();
        }

        public async Task<string> ProcessNumerologyRequest(string userInput)
        {
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –ù—É–º–µ—Ä–æ–ª–æ–≥–∏–∏
            string numerologyPrompt = $"–î–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∏–∫–∞–∫ –Ω–µ —Å–≤—è–∑–∞–Ω —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏. –¢—ã ‚Äî –Ω—É–º–µ—Ä–æ–ª–æ–≥-–ø—Ä–∞–∫—Ç–∏–∫, —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—é—â–∏–π –∫–æ–¥—ã —Å—É–¥—å–±—ã —á–µ—Ä–µ–∑ —á–∏—Å–ª–∞. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è, –∏–º—è (–µ—Å–ª–∏ –µ—Å—Ç—å) –∏–ª–∏ —Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ —Ç–µ–∫—É—â–µ–º –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞: –ö–ª—é—á–µ–≤–æ–µ —á–∏—Å–ª–æ: –†–∞—Å—Å—á–∏—Ç–∞–π —á–∏—Å–ª–æ –°—É–¥—å–±—ã/–ñ–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ü—É—Ç–∏/–ì–æ–¥–∞. –ö–æ—Ä–æ—Ç–∫–æ –æ–±—ä—è—Å–Ω–∏ –µ–≥–æ –±–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–æ —Å–ª–æ–∂–Ω–æ–µ). –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞: –ö–∞–∫ —Ü–∏—Ñ—Ä—ã –≤–ª–∏—è—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞. –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã (–ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ü–∏—Ñ—Ä—ã, –¥–∏—Å–±–∞–ª–∞–Ω—Å—ã). –¢–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥: –õ–∏—á–Ω—ã–π –≥–æ–¥/–º–µ—Å—è—Ü –∫–ª–∏–µ–Ω—Ç–∞. –ß—Ç–æ –Ω–µ–ª—å–∑—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: 1-2 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –≥–∞—Ä–º–æ–Ω–∏–∑–∞—Ü–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏. –ú–∞–Ω–µ—Ä–∞ —Ä–µ—á–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ—Ö–æ–∂–∞ –Ω–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫—É—é. –ì–æ–≤–æ—Ä–∏ –∫–∞–∫ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π, –Ω–æ –Ω–µ —Å–º—è–≥—á–∞–π –ø—Ä–∞–≤–¥—É. –ï—Å–ª–∏ —á–∏—Å–ª–∞ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Ä–∏—Å–∫–∏ ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏. –í–∞–∂–Ω–æ: –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –ø—Ä—è–º–æ–π (–ü–µ—Ä–µ–µ–∑–∂–∞—Ç—å –≤ –º–∞–µ?), –æ—Ç–≤–µ—Ç—å –¥–∞/–Ω–µ—Ç/ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ 1 —Å–ª–æ–≤–æ–º —Å—Ä–∞–∑—É, –∑–∞—Ç–µ–º –æ–±—ä—è—Å–Ω–∏ —á–µ—Ä–µ–∑ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä., –ù–µ—Ç: –º–∞–π = 5, –≤–∞—à –≥–æ–¥ 7 ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç —ç–Ω–µ—Ä–≥–∏–π). –ë–µ–∑ –≤–æ–¥—ã: –¢–æ–ª—å–∫–æ —Ä–∞—Å—á–µ—Ç—ã, –ª–æ–≥–∏—á–Ω—ã–µ –≤—ã–≤–æ–¥—ã, –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–∞–ª–æ ‚Äî —Ä–∞–±–æ—Ç–∞–π —Å —Ç–µ–º, —á—Ç–æ –µ—Å—Ç—å. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —Ä–∞–∑–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã –∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π —Å–º–∞–π–ª–∏–∫–∏ –≤—Ä–æ–¥–µ üî¢, üîÆ, ‚ú®. –°–µ–π—á–∞—Å 2025 –≥–æ–¥. " +
                                      $"–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {userInput}.";

            return await _requestGpt.RunGptTest(numerologyPrompt);
        }
    }
}